<!DOCTYPE html>
<html>
<head>
  <title>To-Do List</title>
  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 6px;
    }
    input, select {
      margin: 5px;
      padding: 5px;
    }
  </style>
</head>
<body>

  <h2>To-Do List</h2>

  <form id="todoForm">
    Date: <input type="date" id="date" required><br>
    ToDo: <input type="text" id="desc" required><br>
    Target Date & Time: <input type="datetime-local" id="targetDate" required><br>
    Status: 
    <select id="status" disabled>
      <option value="PENDING">PENDING</option>
      <option value="IN-PROGRESS">IN-PROGRESS</option>
      <option value="COMPLETE">COMPLETE</option>
    </select><br>
    <input type="submit" value="SUBMIT">
  </form>

  <br>

  <table id="todoTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>ToDo Desc</th>
        <th>Target Date</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="todoBody">
      <!-- Existing tasks -->
    </tbody>
  </table>

  <script>
    // Initial data array
    let todos = [
      { id: 100, desc: "Read Page 6", targetDate: "2025-07-30 11:35", status: "PENDING" },
      { id: 7, desc: "Write a document", targetDate: "2025-07-30 12:40", status: "COMPLETE" },
      { id: 3, desc: "Prepare a Presentation", targetDate: "2025-07-30 01:40", status: "IN-PROGRESS" }
    ];

    
    function getNextId() {
      return Math.max(...todos.map(t => t.id)) + 1;
    }

    
    function getStatus(targetDate) {
      let now = new Date();
      let target = new Date(targetDate);

      if (target > now) {
        return "PENDING";
      } else if (Math.abs(target - now) < 3600000) { // within 1 hour
        return "IN-PROGRESS";
      } else {
        return "COMPLETE";
      }
    }

  
    function renderTable() {
      const tbody = document.getElementById("todoBody");
      tbody.innerHTML = "";
      todos.forEach(todo => {
        let row = `<tr>
          <td>${todo.id}</td>
          <td>${todo.desc}</td>
          <td>${todo.targetDate}</td>
          <td>${todo.status}</td>
        </tr>`;
        tbody.innerHTML += row;
      });
    }

    document.getElementById("todoForm").addEventListener("submit", function(e) {
      e.preventDefault();

      let desc = document.getElementById("desc").value;
      let targetDate = document.getElementById("targetDate").value;

      let newTodo = {
        id: getNextId(),
        desc: desc,
        targetDate: targetDate.replace("T", " "),
        status: getStatus(targetDate)
      };

      todos.push(newTodo);
      renderTable();
      this.reset();
    });

  
    renderTable();
  </script>

</body>
</html>
